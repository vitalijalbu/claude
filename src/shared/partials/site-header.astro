---
import { Button } from "@/components/index";
import SearchAutocomplete from "@/components/search-autocomplete.astro";
import { IconHeart, IconUserCircle } from '@/icons/index';

const { isHomePage = false } = Astro.props;

const isAuthenticated = false;
const userData = isAuthenticated ? {
  name: "IconUserCircle Name",
  email: "user@example.com",
} : null;

const t = (key: string) => {
  const translations = {
    "site.my_account": "My Account",
    "site.settings": "Settings",
    "site.logout": "Esci"
  };
  return translations[key] || key;
};

const route = (name: string) => {
  const routes = {
    "login": "/login",
    "register": "/register",
    "account.index": "/account",
    "account.favorites.index": "/account/favorites",
    "settings.index": "/settings",
    "logout": "/logout"
  };
  return routes[name] || "#";
};
---

<header class="relative flex flex-none items-center py-2 bg-white border-b border-outline">
  <div class="container mx-auto flex items-center justify-between px-4">
    <!-- Logo -->
    <a href="/" class="text-xl font-bold">
      <span class="hidden sm:inline">OnlyEscort</span>
      <span class="sm:hidden">0E</span>
    </a>

    {!isHomePage && (
      <div class="hidden lg:flex flex-1 justify-center">
        <SearchAutocomplete/>
      </div>
    )}

    <!-- Right Section -->
    <div class="flex items-center gap-2">
      <!-- Favorites Button (Desktop only) -->

        <a href="/account/favorites">
          <IconHeart class="h-5 w-5" />
        </a>


      <!-- User Dropdown -->
      <div class="relative group">
        {isAuthenticated ? <Button variant="ghost">
          <span class="hidden sm:inline"></span>
        </Button> : (
          <a href="/login" class="flex gap-1 items-center">
            <IconUserCircle class="h-5 w-5" />
            <span class="hidden sm:inline">Accedi</span>
          </a>
        )}

        <div class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md border bg-white shadow-lg hidden">
          {!isAuthenticated ? (
            <div class="flex flex-col py-1">
              <a href="login" rel="nofollow" class="block px-4 py-2 text-sm hover:bg-gray-100">Accedi</a>
              <a href="register" rel="nofollow" class="block px-4 py-2 text-sm hover:bg-gray-100">Registrati</a>
            </div>
          ) : (
            <div class="flex flex-col py-1">
              <a href="/accounnt" class="block px-4 py-2 text-sm hover:bg-gray-100">Il mio account</a>
              <a href="/account/settings" class="block px-4 py-2 text-sm hover:bg-gray-100">Impostazioni</a>
              <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Esci</a>
            </div>
          )}
        </div>
      </div>
    </div>
  </div>
</header>
