---
const {
  component = "Alert",
  class: className = "",
  variant = "default",
  ...props
} = Astro.props;

const baseClasses =
  "relative w-full rounded-lg border px-4 py-3 text-sm grid grid-cols-[0_1fr] gap-y-0.5 items-start";
const variantClasses = {
  default: "bg-white text-black",
  destructive: "bg-white text-red-600",
};

const alertClass = `${baseClasses} ${variantClasses[variant] || ""} ${className}`;
const titleClass = `col-start-2 font-semibold text-base tracking-tight ${className}`;
const descriptionClass = `col-start-2 text-sm text-gray-700 ${className}`;
const headingTag = props.as ?? "h3";
---

{component === "Alert" && (
  <section
    class={alertClass}
    role="alert"
    aria-live={variant === "destructive" ? "assertive" : "polite"}
    {...props}
  >
    <slot />
  </section>
)}

{component === "AlertTitle" && (
  <Astro.fragment>
    {Astro.glob ? (
      <svelte:component this={headingTag} class={titleClass} {...props}>
        <slot />
      </svelte:component>
    ) : (
      <h3 class={titleClass} {...props}>
        <slot />
      </h3>
    )}
  </Astro.fragment>
)}

{component === "AlertDescription" && (
  <p class={descriptionClass} {...props}>
    <slot />
  </p>
)}
