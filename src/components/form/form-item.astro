---
const {
  label = null,
  name,
  rules = [],
  valuePropName = "value",
  labelCol,
  wrapperCol,
  class: className = "",
} = Astro.props;

// Convert rules to a data attribute
const rulesJson = JSON.stringify(rules);
---

<div class={`form-item flex-col gap-4 items-start ${className}`}>
  {label && (
    <div class="form-label-container">
      <label for={name} class="form-label w-full mb-2">
        {label}
      </label>
    </div>
  )}
  <div class={`form-control-container`}>
      <slot name="default" data-rules={rulesJson} data-value-prop={valuePropName} />
      <div 
        x-show={`errors['${name}']`} 
        x-text={`errors['${name}']`} 
        class="form-error"
      >
      </div>
  </div>
</div>